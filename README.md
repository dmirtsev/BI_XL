# BI-система для анализа данных о продажах

Это веб-приложение на Python с модульной архитектурой, использующее Flask и Dash для создания интерактивной BI-системы. Приложение позволяет загружать данные из Excel, обрабатывать их и визуализировать в виде дашбордов.

## Архитектура проекта

Проект имеет модульную структуру, где каждый компонент отвечает за свою часть бизнес-логики.

```
/
|-- migrations/             # Миграции базы данных (Alembic)
|-- src/                    # Исходный код
|   |-- analytics/          # Модуль загрузки и обработки данных из Excel
|   |-- auth/               # Модуль аутентификации пользователей
|   |-- contacts/           # Модуль управления контактами
|   |-- dashboard/          # Модуль интерактивного дашборда (Dash)
|   |-- partner_analytics/  # Модуль аналитики по партнерам
|   |-- product_grouping/   # Модуль для группировки продуктов
|   |-- templates/          # HTML-шаблоны для Flask
|   `-- main.py             # Главная точка входа, инициализация Flask
|
|-- tests/                  # Автоматические тесты
|-- .gitignore
|-- alembic.ini             # Конфигурация Alembic
|-- analytics.db            # Файл базы данных SQLite
|-- requirements.txt        # Зависимости проекта
|-- run.py                  # Скрипт для запуска приложения
`-- README.md               # Этот файл
```

### Ключевые принципы

- **Модульность**: Каждый модуль в `src/` (например, `auth`, `partner_analytics`) является независимым компонентом со своим API (Flask Blueprint), бизнес-логикой (`core.py`) и моделями данных (`models.py`).
- **Разделение ответственностей**:
    - **Flask (`main.py`)** используется как основной веб-сервер для обработки API-запросов и аутентификации.
    - **Dash (`dashboard/app.py`)** интегрирован во Flask для создания интерактивных дашбордов.
- **База данных**: Используется **SQLAlchemy** для работы с базой данных SQLite и **Alembic** для управления миграциями схемы.

## Как запустить

1.  **Установите зависимости:**

    ```bash
    pip install -r requirements.txt
    ```

2.  **Примените миграции базы данных (если необходимо):**

    ```bash
    alembic upgrade head
    ```

3.  **Запустите приложение:**

    Приложение запускается из корневой папки проекта с помощью скрипта `run.py`.

    ```bash
    python run.py
    ```

    Веб-сервер будет доступен по адресу `http://127.0.0.1:5002`. Дашборд находится по адресу `http://127.0.0.1:5002/dashboard/`.

4.  **Запустите тесты:**

    ```bash
    python -m unittest discover -s tests
